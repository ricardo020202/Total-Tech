<%- include('includes/head.ejs') %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <div class="spacer"></div>
    <div class="container">
        <div class="row">
            <div class="col d-flex justify-content-center">
                <form action="/users/signUp" method="POST">
                    <p>
                        <%=mensaje%>
                    </p>
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                    <div class="p-5 rounded-5 text-dark shadow rounded bg-custom-login" style="width: 25rem">
                        <div class="d-flex justify-content-center">
                            <i class="bi bi-person-circle"></i>
                        </div>
                        <div class="text-center fs-1 fw-bold">Sign up</div>
                        <div class="input-group mt-4">
                            <div class="input-group-text bg-signUp">
                                <img src="/assets/username-icon.svg" alt="username-icon" style="height: 1rem;" />
                            </div>
                            <input class="form-control bg-light" style="z-index: 1;" type="text" placeholder="Nombre"
                                name="nombre" required />
                        </div>
                        <div class="input-group mt-1">
                            <div class="input-group-text bg-signUp">
                                <img src="/assets/username-icon.svg" alt="username-icon" style="height: 1rem" />
                            </div>
                            <input class="form-control bg-light" style="z-index: 1;" type="text" placeholder="Apellido"
                                name="apellido" required />
                        </div>
                        <div class="input-group mt-4">
                            <div class="input-group-text bg-signUp">
                                <img src="/assets/username-icon.svg" alt="username-icon" style="height: 1rem" />
                            </div>
                            <input class="form-control bg-light" style="z-index: 1;" type="email" placeholder="Correo"
                                name="email" required />
                        </div>
                        <div class="input-group mt-1">
                            <div class="input-group-text bg-signUp">
                                <img src="/assets/password-icon.svg" alt="password-icon" style="height: 1rem" />
                            </div>
                            <input class="form-control bg-light" style="z-index: 1;" type="password"
                                placeholder="Contraseña" name="password" id="password" required />
                        </div>
                        <div class="input-group mt-1">
                            <div class="input-group-text bg-signUp">
                                <img src="/assets/password-icon.svg" alt="password-icon" style="height: 1rem" />
                            </div>
                            <input class="form-control bg-light" style="z-index: 1;" type="password"
                                placeholder="Confirmar Contraseña" name="confirm-password" id="confirm-password"
                                required />
                        </div>
                        <div id="password-message"></div>
                        <div class="d-flex justify-content-around mt-1">
                            <div class="d-flex align-items-center gap-1">
                                <input class="form-check-input" type="checkbox" required />
                                <div class="pt-1" style="font-size: 0.9rem">Acepto términos y condiciones</div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-around mt-1">
                            <div class="pt-1">
                                <a href="/onyx/TermYCond" class="text-decoration-none text-white fw-semibold fst-italic"
                                    style="font-size: 0.9rem">Términos y condiciones</a>
                            </div>
                        </div>
                        <button class="btn bg-custom1 text-white w-100 mt-4 fw-semibold shadow-sm btnreg" type="submit"
                            name="action" id="confirm">
                            Registrarme
                        </button>
                        <div class="p-3">
                            <div class="border-bottom text-center" style="height: 0.9rem">
                                <span class="bg-white px-3">o</span>
                            </div>
                        </div>
                        <div id="g_id_onload"
                            data-client_id="141860110384-4rkak3dc4oehtdj46ogd2aufa9vf34le.apps.googleusercontent.com"
                            data-context="signin" data-ux_mode="popup" data-auto_prompt="true">
                        </div>
                        <div class="g_id_signin mt-3" data-type="standard" data-shape="rectangular"
                            data-theme="filled_black" data-text="signin_with" data-size="large"
                            data-logo_alignment="left" data-width="300">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="/js/signUp.js"></script>
    <script>
        function handleCredentialResponse(response) {
            console.log('Credential Response:', response);
            // Aquí puedes enviar la respuesta al servidor para autenticar al usuario.
            // Por ejemplo, puedes usar un objeto XMLHttpRequest para enviar una solicitud POST al servidor.
        }
        window.onload = function () {
            google.accounts.id.initialize({
                client_id: "141860110384-4rkak3dc4oehtdj46ogd2aufa9vf34le.apps.googleusercontent.com",
                callback: handleCredentialResponse,
            });
            google.accounts.id.renderButton(
                document.getElementById("google-signin-button"),
                {
                    theme: "filled_black",
                    size: "large",
                    width: "100%",
                    height: "50",
                    locale: "es",
                }
            );
            google.accounts.id.prompt(); // Esta función activa el aviso automático para el inicio de sesión.
        };
    </script>

    <%- include('includes/foot.ejs') %>